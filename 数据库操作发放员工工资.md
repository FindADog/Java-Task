   数据库操作发放职员工资
 ========================
    数据库和软件息息相关，密不可分，这次task利用了简单的数据库连接来完成。
### 使用的工具
* Eclipse
* SqlServer2008
### 操作步骤
> **1.创建数据库：**<br>
      代码如下：<br>
		create table personmanage<br>
                (<br>
                        pno			int,<br>
                        pname		varchar(20),<br>
                        pbirthday	int,<br>
                        psage		int,<br>
                        pperscent	int default 0,<br>
                        pbonus		int default 0<br>
                 )      
      
**运行截图**
<img src="https://github.com/FindADog/Java-Task/blob/master/image/%E6%95%B0%E6%8D%AE%E5%BA%93.PNG"/>
> **2.java页面建立连接**<br>
		代码如下：<br>
		//主要完成数据库的连接调用


		public class DbHelper 
		{
			private static String drive="com.microsoft.sqlserver.jdbc.SQLServerDriver";//数据库驱动
			private static String url="jdbc:sqlserver://localhost:1433;databaseName=jsp";
			private static String username="sa";//数据库用户名
			private static String password="yy2454586";//数据库密码


			private static Connection conn=null;

			//静态代码块负责加载驱动

			static
			{
				try
				{
					Class.forName(drive);
				}
				catch(Exception e)
				{
					e.printStackTrace();
				}
			}//static

			//单例模式返回连接对象

			public static Connection getConnection() throws Exception
			{
				if(conn==null)
				{
					conn=DriverManager.getConnection(url, username,password);

				}
				return conn;
			}



		}
> **3.对数据库的操作**<br>
**该类主要完成对数据库的插入数据和读出数据，为了便于熟悉HashMap特意采用了此种结构来作为数据结构，虽然用ArrayList已经很方便**<br>
		代码如下:<br>
		package com.DBhelper;
		import com.Person.*;
		import java.sql.Connection;
		import java.sql.ResultSet;
		import java.sql.Statement;
		import java.util.HashMap;


		//输入个人信息到数据库和数据库的信息读取

		public class DbDao 
		{
			private Connection conn=null;

			public void InsrertToDb(Person person)//插入数据到数据库
			{
				String sql="insert into personmanage(pno,pname,pbirthday,psage,pperscent,pbonus)"+ "values("+person.getPno()+",'"+person.getPname()+"',"+person.getPbirthday()+","+person.getPsage()+","+person.getPperscent()+","+person.getPbonus()+")";
				try//执行数据库操作
				{
					conn=DbHelper.getConnection();//生成数据库连接
					Statement stmt=conn.createStatement();//获得Statement对象
					stmt.executeUpdate(sql); 

				}
				catch(Exception e)
				{
					e.printStackTrace();
				}
			}

			public HashMap<String,Person> getAllPersonData()
			{
				String sql="select *from personmanage";
				try
				{
					conn=DbHelper.getConnection();
					Statement stmt=conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE); 
					ResultSet rs=stmt.executeQuery(sql);

					HashMap<String,Person> list=new HashMap<String,Person>();
					while(rs.next())//将数据库中的全部数据以名字_个人的方式放入HashMap
					{
						Person person=new Person(rs.getString("pname"),rs.getInt("pno"),rs.getInt("pbirthday"),rs.getInt("psage"),rs.getInt("pperscent"),rs.getInt("pbonus"));
						list.put(person.getPname(), person);

					}
					return list;//将HashMap返回
				}
				catch(Exception e)
				{
					e.printStackTrace();
				}
				return null;

			}
		}



